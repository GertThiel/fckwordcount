<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
	<head>
		<title>Placeholder Properties</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta content="noindex, nofollow" name="robots">
		<script src="../../dialog/common/fck_dialog_common.js" type="text/javascript"></script>
		<script language="javascript">

      var dialog = window.parent;
      var oEditor = dialog.InnerDialogLoaded();
      var FCKLang = oEditor.FCKLang;

      function stripHTML(adocument){
        return adocument.replace(/\u00a0/g, ' ').replace(/<\S[^><]*>/g, '');
      }

      function wordcount(adocument) {
        var words = adocument.replace(/\s/g,' ').replace(/ {2,}/g,' ').replace(/ $|^ /g,'').split(' ');
        return words.length;
      }

      window.onload = function() {
	      // First of all, translate the dialog box texts
	      oEditor.FCKLanguageManager.TranslatePage( document );
	      var DOMDocument = oEditor.FCK.EditorDocument;
	      if ( oEditor.FCKBrowserInfo.IsIE ) {
	        var HTMLText = DOMDocument.body.innerHTML;
	      } else {
	        var r = DOMDocument.createRange() ;
          r.selectNodeContents( DOMDocument.body );
          var HTMLText = r.startContainer.innerHTML;
	      }
	      var actualNoOfChars = HTMLText.length;
	      var strippedHTMLText = stripHTML(HTMLText);
	      document.getElementById('WordCountChars').innerHTML = strippedHTMLText.length + '/' + actualNoOfChars;
	      document.getElementById('WordCountWords').innerHTML = wordcount( strippedHTMLText );
      }

		</script>
	</head>
	<body scroll="no" style="OVERFLOW: hidden">
		<table height="100%" cellSpacing="0" cellPadding="0" width="100%" border="0">
			<tr>
				<td>
					<table cellSpacing="0" cellPadding="0" align="center" border="0">
						<tr>
							<td align="right">
								<span fckLang="WordCountCharsLabel">Number of characters:</span>&nbsp;
							</td>
							<td>
							  <span id="WordCountChars">0/0</span>
							</td>
						</tr>
						<tr>
							<td align="right">
								<span fckLang="WordCountWordsLabel">Number of words:</span>&nbsp;
							</td>
							<td>
							  <span id="WordCountWords">0</span>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>
	</body>
</html>
